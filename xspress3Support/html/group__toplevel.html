<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xspress3api: Top level functions that form the prefered API.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Top level functions that form the prefered API.</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config</a> (int ncards, int num_tf, char *baseIPaddress, int basePort, char *baseMACaddress, int num_chan, int create_module, char *modname, int debug, int card_index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure and initialise the complete xspress3 system.  <a href="#gabbdb522cdcc0230ab9d2e06c63c4cf03"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gafa051c9d68a727d4a192411da8ac2ed2">xsp3_get_error_message</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the last error message that was generated by the xspress3 system.  <a href="#gafa051c9d68a727d4a192411da8ac2ed2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gac6db1572b30b9249a616c56235aec73a">xsp3_close</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close all open paths in the system.  <a href="#gac6db1572b30b9249a616c56235aec73a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga506fab5c0da51744c83b2d1dbca2cacc">xsp3_get_revision</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get firmware revision.  <a href="#ga506fab5c0da51744c83b2d1dbca2cacc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of channels currently configured in the system.  <a href="#ga8d0027b9ea7ab15bfe691face4bd45c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of xspress3 cards currently configured in the system.  <a href="#ga083bca593ecb81ea2d6f5d726ef64fae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga5bbcd251489c99847d2551de85366953">xsp3_get_chans_per_card</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of channels available per xspress3 card.  <a href="#ga5bbcd251489c99847d2551de85366953"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga4a88ee99edeba61dbb6fad03e8d373ec">xsp3_get_bins_per_mca</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of bins per MCA configured in the xspress3 system.  <a href="#ga4a88ee99edeba61dbb6fad03e8d373ec"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga5eec71b56dbe609f3ec70b507977c0a2">xsp3_get_max_num_chan</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the maxmimum number of channels currently available in system.  <a href="#ga5eec71b56dbe609f3ec70b507977c0a2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gaf0857c343325d92e949074f510511544">xsp3_format_run</a> (int path, int chan, int aux1_mode, int aux1_thres, int aux2_cont, int flags, int aux2_mode, int nbits_eng)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set format of the data to be histogrammed.  <a href="#gaf0857c343325d92e949074f510511544"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gafc259c3087f4068969673f314dfa5e1e">xsp3_get_format</a> (int path, int chan, int *nbins_eng, int *nbins_aux1, int *nbins_aux2, int *nbins_tf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the format control parameters.  <a href="#gafc259c3087f4068969673f314dfa5e1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga370b5f701a5ee1825f83968f4304719f">xsp3_set_window</a> (int path, int chan, int win, int low, int high)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the scaler windows.  <a href="#ga370b5f701a5ee1825f83968f4304719f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga9ed40f17d2ad96d291e60a6b6b47d860">xsp3_set_good_thres</a> (int path, int chan, u_int32_t good_thres)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the threshold for the good event scaler.  <a href="#ga9ed40f17d2ad96d291e60a6b6b47d860"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga495d0a4b981ad713d9284c75e08730f6">xsp3_get_window</a> (int path, int chan, int win, u_int32_t *low, u_int32_t *high)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the scaler window settings.  <a href="#ga495d0a4b981ad713d9284c75e08730f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga770b2fa940753aafa9ed6891d2e90f25">xsp3_set_glob_timeA</a> (int path, int card, u_int32_t time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup the triggering or time frame control register.  <a href="#ga770b2fa940753aafa9ed6891d2e90f25"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga6efddbcfd9d2ae04b68c6237f60ff7f4">xsp3_set_glob_timeFixed</a> (int path, int card, u_int32_t time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the fixed time frame register.  <a href="#ga6efddbcfd9d2ae04b68c6237f60ff7f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga20ce3c1c0a8f5d4319eb10c957d6eed5">xsp3_get_glob_timeA</a> (int path, int card, u_int32_t *time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the time frame register.  <a href="#ga20ce3c1c0a8f5d4319eb10c957d6eed5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga636b7f6b16ef82ce532cdab716aacf86">xsp3_get_glob_timeFixed</a> (int path, int card, u_int32_t *time)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get fixed time frame register.  <a href="#ga636b7f6b16ef82ce532cdab716aacf86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga1553a3974c568daa3a863ecf97353cd3">xsp3_init_roi</a> (int path, int chan)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise the regions of interest.  <a href="#ga1553a3974c568daa3a863ecf97353cd3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gabc8cf6682f5430f6ae5461e5a234896f">xsp3_set_roi</a> (int path, int chan, int num_roi, <a class="el" href="struct___x_s_p_r_o_i.html">XSP3Roi</a> *roi)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the regions of interest.  <a href="#gabc8cf6682f5430f6ae5461e5a234896f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga1748aa21c7f8fc35f669db6f29ae702c">xsp3_get_disable_threading</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get Disable multi threading flags.  <a href="#ga1748aa21c7f8fc35f669db6f29ae702c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga89bc586518b2e250956838081d59d8b2">xsp3_set_disable_threading</a> (int path, int flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set Disable multi threading flags.  <a href="#ga89bc586518b2e250956838081d59d8b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga025c83ac0730f5860d3257cbf1263957">xsp3_clocks_setup</a> (int path, int card, int clk_src, int flags, int tp_type)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set up ADC data processing clocks source.  <a href="#ga025c83ac0730f5860d3257cbf1263957"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga0c36eb126f4bc0259a4d95e548e88cad">xsp3_dma_config_memory</a> (int path, int card, int layout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure the memory.  <a href="#ga0c36eb126f4bc0259a4d95e548e88cad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga678235d44f81d7cf0bcbc24e2d3a0d5a">xsp3_set_run_flags</a> (int path, int flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the run mode flags.  <a href="#ga678235d44f81d7cf0bcbc24e2d3a0d5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga932025bce0a866e59399f6d0a460ef73">xsp3_get_run_flags</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the run mode flags.  <a href="#ga932025bce0a866e59399f6d0a460ef73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga9588da2ad9d33f0917aa16a848bc65d7">xsp3_scope_wait</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function polls the DMA descriptors for the two scope DMA streams to check whether all the data has been transfered.  <a href="#ga9588da2ad9d33f0917aa16a848bc65d7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gabfe70c27b15eccfee99e8891c4d241e8">xsp3_getDeadtimeCalculationEnergy</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the energy for dead time correction.  <a href="#gabfe70c27b15eccfee99e8891c4d241e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga5c57fefce7e9df9c3774c17cb461762c">xsp3_setDeadtimeCalculationEnergy</a> (int path, double energy)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the energy for dead time energy correction.  <a href="#ga5c57fefce7e9df9c3774c17cb461762c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga2035d66b83c87955550dea7e8373e404">xsp3_scaler_dtc_read</a> (int path, double *dest, unsigned scaler, unsigned chan, unsigned t, unsigned n_scalers, unsigned n_chan, unsigned dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a block of dead time corrected scaler data.  <a href="#ga2035d66b83c87955550dea7e8373e404"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gaed10703918be9fd1491bb583e361b27a">xsp3_hist_dtc_read4d</a> (int path, double *hist_buff, double *scal_buff, unsigned eng, unsigned aux, unsigned chan, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_chan, unsigned num_tf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 4 dimensional block of dead time corrected histogram data and optionally return the dead time corrected scaler data.  <a href="#gaed10703918be9fd1491bb583e361b27a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga1be2e3752414db3354a335f69febe1e4">xsp3_has_itfg</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether firmware includes an internal TFG.  <a href="#ga1be2e3752414db3354a335f69febe1e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga673ae2d9f80b5e5fe73f94cdc9e98a0e">xsp3_has_reset_det</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether firmware includes a Reset detector.  <a href="#ga673ae2d9f80b5e5fe73f94cdc9e98a0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga36d0b281b850c64fb702ef8ca27b488b">xsp3_has_glitch_det</a> (int path, int card, int *min_thres)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether firmware includes a glitch detector.  <a href="#ga36d0b281b850c64fb702ef8ca27b488b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gab7b8bb43907d58f18a61dbd985542c18">xsp3_has_scope_dig_alt0</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determine whether firmware Alternatebit 3..0 controlling scope stream 0.  <a href="#gab7b8bb43907d58f18a61dbd985542c18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gaf3b1a4949881a95c76bad27b1b3f5783">xsp3_histogram_start</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start system and enable counting.  <a href="#gaf3b1a4949881a95c76bad27b1b3f5783"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gade395791d70335b40677571a82584919">xsp3_histogram_arm</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start system ready for histogramming but do not software enable histogramming.  <a href="#gade395791d70335b40677571a82584919"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gaeed745920deb1aaca2ec8dbf2919136e">xsp3_histogram_continue</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Continue counting from armed or paused when time framing is in software controlled (FIXED) mode.  <a href="#gaeed745920deb1aaca2ec8dbf2919136e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gace2c23d40d2690671901f4c683a58c3c">xsp3_histogram_pause</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pause counting in seriesof software timed frames.  <a href="#gace2c23d40d2690671901f4c683a58c3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga6611bffd6c764d6dc971ac0f3c13cf75">xsp3_histogram_stop</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop histogramming.  <a href="#ga6611bffd6c764d6dc971ac0f3c13cf75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gaf818e75dbb4e6a52192705c70dfac1fd">xsp3_histogram_clear</a> (int path, int first_chan, int num_chan, int first_frame, int num_frames)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clears a section of the histogramming data buffer.  <a href="#gaf818e75dbb4e6a52192705c70dfac1fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gac86da3c2d625a6a872847d2b6edca84a">xsp3_histogram_is_any_busy</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check if any histogarmming thread for this system is busy or waiting for data.  <a href="#gac86da3c2d625a6a872847d2b6edca84a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga48dac2327cda3dd127ff6f36d177a403">xsp3_histogram_read4d</a> (int path, u_int32_t *buffer, unsigned eng, unsigned aux, unsigned chan, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_chan, unsigned num_tf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 4 dimensional block of histogram data.  <a href="#ga48dac2327cda3dd127ff6f36d177a403"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga75a51e96d7ad2e2f3d4be4b787f66d9d">xsp3_histogram_read3d</a> (int path, u_int32_t *buffer, unsigned x, unsigned y, unsigned t, unsigned dx, unsigned dy, unsigned dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a 3 dimensional block of histogram data with aux and chan combined into "y" to suit da.server.  <a href="#ga75a51e96d7ad2e2f3d4be4b787f66d9d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga88697faf20c618ef49135fc935e4b016">xsp3_histogram_read_chan</a> (int path, u_int32_t *buffer, unsigned chan, unsigned eng, unsigned aux, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_tf)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a channel of histogram data.  <a href="#ga88697faf20c618ef49135fc935e4b016"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga0ba0e14d4063ad966a4385750697da14">xsp3_i2c_read_adc_temp</a> (int path, int card, float *temp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Temperature from all 4 LM75s on 1 or all ADC boards.  <a href="#ga0ba0e14d4063ad966a4385750697da14"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga757ccf26dff09b316e07af665388734c">xsp3_i2c_set_adc_temp_limit</a> (int path, int card, int critTemp)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set over Temperature threshold for all 4 LM75s on 1 or all ADC boards.  <a href="#ga757ccf26dff09b316e07af665388734c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga45a3b1bdca5df51717f98d00fdd200d3">xsp3_itfg_setup</a> (int path, int card, int num_tf, u_int32_t col_time, int trig_mode, int gap_mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup Internal time frame generator (TFG) for a series of equal length frames.  <a href="#ga45a3b1bdca5df51717f98d00fdd200d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gad7cf4112aeaf0bf80fbc9dd49956edef">xsp3_itfg_get_setup</a> (int path, int card, int *num_tf, u_int32_t *col_time, int *trig_mode, int *gap_mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve settings of the Internal time frame generator (TFG).  <a href="#gad7cf4112aeaf0bf80fbc9dd49956edef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga6a5a675b8e87125f6d3cc23a091b474d">xsp3_itfg_stop</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the Internal time frame generator (TFG).  <a href="#ga6a5a675b8e87125f6d3cc23a091b474d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga5b019fbf3f7db000b8eeb08b4bdf3c63">xsp3_save_settings</a> (int path, char *dir_name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Save all xspress3 settings into a series of files.  <a href="#ga5b019fbf3f7db000b8eeb08b4bdf3c63"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga922527587ac747570235681e0d547e58">xsp3_restore_settings</a> (int path, char *dir_name, int force_mismatch)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Restore all xspress3 settings from series of files.  <a href="#ga922527587ac747570235681e0d547e58"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga1010d016188cbc54ebace82c81412480">xsp3_scaler_get_num_tf</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the maximum number of time frames of scaler data that can be stored with the current memory allocation within the FEM.  <a href="#ga1010d016188cbc54ebace82c81412480"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga6e31a5956682ff9886ed317965c512a3">xsp3_scaler_read</a> (int path, u_int32_t *dest, unsigned scaler, unsigned chan, unsigned t, unsigned n_scalers, unsigned n_chan, unsigned dt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read a block of scaler data.  <a href="#ga6e31a5956682ff9886ed317965c512a3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#gac087294ee7be16def702c5e44b901f41">xsp3_scaler_check_progress</a> (int path)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks how many time frames have been processed.  <a href="#gac087294ee7be16def702c5e44b901f41"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga6c0fd494d40067bebf2a8cf6cbf640b1">xsp3_scaler_check_desc</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks the DMA descriptors for the Scaler stream to check how many time frames of scalers have been successfuly transfered to memeory.  <a href="#ga6c0fd494d40067bebf2a8cf6cbf640b1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga287351331773b121b8db78c90bdba4e9">xsp3_read_scope_data</a> (int path, int card)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read scope data from 10G ethernet using UDP protocol.  <a href="#ga287351331773b121b8db78c90bdba4e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__toplevel.html#ga67a9fcd8b8ebed6997ac2e831b76163b">xsp3_write_playback_data</a> (int path, int card, u_int32_t *buffer, size_t nbytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write playback data into DRAM via the 10G ethernet link.  <a href="#ga67a9fcd8b8ebed6997ac2e831b76163b"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga025c83ac0730f5860d3257cbf1263957"></a><!-- doxytag: member="xspress3_clocks.c::xsp3_clocks_setup" ref="ga025c83ac0730f5860d3257cbf1263957" args="(int path, int card, int clk_src, int flags, int tp_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_clocks_setup </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>clk_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tp_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set up ADC data processing clocks source. </p>
<p>The clock source can come from various places. At power up and from some debugging teh clock source can be from the FPGA board clocks. However, for normal operation the data processing clock has to be from the ADC board. This is setup by this command. It shouldbedoneafter xsp3_config, but before anything else. Note that <a class="el" href="">xsp3_restore_settings</a> cannot resotore the clock configuration. <br/>
<br/>
 The following definitions describe the valid values for the parameter clk_src  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_CLOCK_SRC The following definitions describe the valid values for flags which are or'ed together to make the flags parameter.  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_CLOCK_FLAGS</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card is less than 0 then all cards are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clk_src</em>&nbsp;</td><td>clock source </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>setup flags (see definition) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tp_type</em>&nbsp;</td><td>test pattern type in the IO spartan FPGAs </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gac6db1572b30b9249a616c56235aec73a"></a><!-- doxytag: member="xspress3.c::xsp3_close" ref="gac6db1572b30b9249a616c56235aec73a" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_close </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Close all open paths in the system. </p>
<p>Currently full details of tidying various shared objects and threads are not fully supported so this function is a place holder for future work. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gabbdb522cdcc0230ab9d2e06c63c4cf03"></a><!-- doxytag: member="xspress3.c::xsp3_config" ref="gabbdb522cdcc0230ab9d2e06c63c4cf03" args="(int ncards, int num_tf, char *baseIPaddress, int basePort, char *baseMACaddress, int num_chan, int create_module, char *modname, int debug, int card_index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_config </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ncards</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>baseIPaddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>basePort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>baseMACaddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>create_module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>modname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>debug</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card_index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure and initialise the complete xspress3 system. </p>
<p>This is the normal configuration entry point for XSPRESS3. The number of cards and number of time frames parameters must be specified. The debug and create_module parameters are boolean and should be specified as 0 or 1. All other parameters can be used as default by specifying either NULL or -1. <br/>
 The functions checks if the parameters of this configuration have been previously used. If so the system is re-inialised and the existing path is returned. Otherwise if its a unique set of cards to configure allow the configuration. Nb. If a different debug flag is set for the case where the same parameters are used this may overwrite another connections debug preference. <br/>
 This function normally creates all the shared memory objects and starts the histogramming thread(s).</p>
<div class="fragment"><pre class="fragment">
 * Using the default baseIPaddress, for the host server, of 192.168.0.1 the following values are calculated for the complete xspress3 system.
 *
 * xspress3 1Gb tcp IP address 		card 1		192.168.0.2
 * 									card 2		192.168.0.3
 * 									card 3		192.168.0.4
 * 									...
 *
 * host 10Gb udp IP address 		card 1		192.168.0.65
 * 									card 2		192.168.0.69
 * 									card 3		192.168.0.73
 * 									...
 *
 * xspress3 10Gb udp IP address 	card 1		192.168.0.66
 * 									card 2		192.168.0.70
 * 									card 3		192.168.0.74
 * 									...
 *
 * Using the default MAC address of 02.00.00.00.00.00 the following values are calculated for the complete xspress3 system.
 *
 * xspress3 MAC address 			card 1		02.00.00.00.00.00
 * 									card 2		02.00.00.00.00.02
 * 									card 3		02.00.00.00.00.04
 * 									...
 *
 * For all xspress3 cards the default basePort for the tcp connection is 30123 and for the udp connection 30124.
 *
 * </pre></div> <dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ncards</em>&nbsp;</td><td>the number of xspress3 cards that constitute the xspress3 system, between 1 and <a class="el" href="xspress3__data__mod_8h.html#ae448980f7ec689ad9e0a9ead8f722197">XSP3_MAX_CARDS</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>the maximum number of time frames when used as 4096 energy bins and no auxiliary data. If the memory is arranged differently (using RoI or Auxiliary data) then the actual number of tf that will fit can go up or down </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseIPaddress</em>&nbsp;</td><td>the IP address of the host server in dotted quad format (e.g. 192.168.0.1) from which all other address's are calculated or NULL to use the default </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>basePort</em>&nbsp;</td><td>the IP port number or -1 to use the default </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>baseMACaddress</em>&nbsp;</td><td>the base MAC address (e.g. 02.00.00.00.00) for card 1, from which all other card MAC address's are calculated or NULL to use the default </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_chan</em>&nbsp;</td><td>the number of channels to be configured in the xspress3 system. between 1 and (ncards * <a class="el" href="xspress3_8h.html#aeb8bab497465c4641c11dd55a8af51b3">XSP3_MAX_CHANS_PER_CARD</a>) or -1 to configure all available channels. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>create_module</em>&nbsp;</td><td>a boolean flag to determine whether to create a data module </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modname</em>&nbsp;</td><td>the module name or NULL to use the default. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>debug</em>&nbsp;</td><td>a integer flag to turn debug messages off/on/verbose. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card_index</em>&nbsp;</td><td>starting card number ie 0 = card1, 1 = card2 etc. -1 assumes card_index 0) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a handle to the top level of the xspress3 system or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0c36eb126f4bc0259a4d95e548e88cad"></a><!-- doxytag: member="xspress3_dma.c::xsp3_dma_config_memory" ref="ga0c36eb126f4bc0259a4d95e548e88cad" args="(int path, int card, int layout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_dma_config_memory </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>layout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure the memory. </p>
<p>At present it is a fixed layout so there is little point calling this. Consider future expansion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layout</em>&nbsp;</td><td>Not used. Reserved for future expansion </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf0857c343325d92e949074f510511544"></a><!-- doxytag: member="xspress3.c::xsp3_format_run" ref="gaf0857c343325d92e949074f510511544" args="(int path, int chan, int aux1_mode, int aux1_thres, int aux2_cont, int flags, int aux2_mode, int nbits_eng)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_format_run </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>aux1_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>aux1_thres</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>aux2_cont</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>aux2_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nbits_eng</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set format of the data to be histogrammed. </p>
<p>The output histogram format is a multi-dimesional space. The first dimension is the photon energy. The second dimension (if present) is the auxilliary data 1 aux1. The third dimension (if present) is the auxilliary data 2 aux2. The fourth dimension is the time frame.</p>
<p>The following definitions describe the aux1 mode options  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_AUX1_MODE The following definitions describe the aux2 mode options  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_AUX2_MODE</p>
<p>The flags shared the settings with the format register. Currently the only bit which can be set here is XSP3_FORMAT_PILEUP_REJECT. If set, events whcih are identified as pileup from either the trigger hardware or by event width (see <a class="el" href="">xsp3_build_pileup_time</a>) are discarded from the in-window scalers and MCA spectra.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) if chan is less than 0 then all channels are selected </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux1_mode</em>&nbsp;</td><td>special debug mode (set to 0 for user operation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux1_thres</em>&nbsp;</td><td>threshold special debug value (set to 0 for user operation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux2_cont</em>&nbsp;</td><td>set bits for ADC range (set to 0 for user operation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>for pileup rejection (set to 0 for user operation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux2_mode</em>&nbsp;</td><td>(set to 0 for user operation) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbits_eng</em>&nbsp;</td><td>number bits of energy (default 12) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of time frames of the requested configuration that fits into memory. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4a88ee99edeba61dbb6fad03e8d373ec"></a><!-- doxytag: member="xspress3.c::xsp3_get_bins_per_mca" ref="ga4a88ee99edeba61dbb6fad03e8d373ec" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_bins_per_mca </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of bins per MCA configured in the xspress3 system. </p>
<p>The correct value is stored in the top level path of the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of bins per MCA for the current configuration of the xspress3 system or a negative error code. FIXME : Returns default number of bins, does not report any ROI settings. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5bbcd251489c99847d2551de85366953"></a><!-- doxytag: member="xspress3.c::xsp3_get_chans_per_card" ref="ga5bbcd251489c99847d2551de85366953" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_chans_per_card </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of channels available per xspress3 card. </p>
<p>The correct value is stored in the top level path of the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of channels available per xspress3 card or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1748aa21c7f8fc35f669db6f29ae702c"></a><!-- doxytag: member="xspress3.c::xsp3_get_disable_threading" ref="ga1748aa21c7f8fc35f669db6f29ae702c" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_disable_threading </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get Disable multi threading flags. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the Disable multi threading flags. See <a class="el" href="group___x_s_p3___m_t___f_l_a_g_s.html">XSP3_MT_FLAGS</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gafa051c9d68a727d4a192411da8ac2ed2"></a><!-- doxytag: member="xspress3.c::xsp3_get_error_message" ref="gafa051c9d68a727d4a192411da8ac2ed2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* xsp3_get_error_message </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the last error message that was generated by the xspress3 system. </p>
<p>Whenever an function returs an error code a deatiled error messages is sprintfed into the error_message buffer. It can be retrieved using this call. The maximum length of this message is <a class="el" href="xspress3_8h.html#ad0c874de23022554d6f0a80425ea2737">XSP3_MAX_MSG_LEN</a>.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A pointer to the statically allocated error message, which will remain valid only until the next error occurs. </dd></dl>

</div>
</div>
<a class="anchor" id="gafc259c3087f4068969673f314dfa5e1e"></a><!-- doxytag: member="xspress3.c::xsp3_get_format" ref="gafc259c3087f4068969673f314dfa5e1e" args="(int path, int chan, int *nbins_eng, int *nbins_aux1, int *nbins_aux2, int *nbins_tf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_format </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nbins_eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nbins_aux1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nbins_aux2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>nbins_tf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the format control parameters. </p>
<p>Retrieves the parameters set by <a class="el" href="">xsp3_format_run</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbins_eng</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbins_aux1</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbins_aux2</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbins_tf</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga20ce3c1c0a8f5d4319eb10c957d6eed5"></a><!-- doxytag: member="xspress3.c::xsp3_get_glob_timeA" ref="ga20ce3c1c0a8f5d4319eb10c957d6eed5" args="(int path, int card, u_int32_t *time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_glob_timeA </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the time frame register. </p>
<p><br/>
<br/>
 The following definitions describe the layout of the global time A register  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_GLOBAL_TIMEA_REGISTER</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>the time frame register </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga636b7f6b16ef82ce532cdab716aacf86"></a><!-- doxytag: member="xspress3.c::xsp3_get_glob_timeFixed" ref="ga636b7f6b16ef82ce532cdab716aacf86" args="(int path, int card, u_int32_t *time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_glob_timeFixed </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get fixed time frame register. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>fixed time frame register </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5eec71b56dbe609f3ec70b507977c0a2"></a><!-- doxytag: member="xspress3.c::xsp3_get_max_num_chan" ref="ga5eec71b56dbe609f3ec70b507977c0a2" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_max_num_chan </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the maxmimum number of channels currently available in system. </p>
<p>The correct value is stored in the top level path of the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the maximum number of channels for the current configuration of the xspress3 system or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga083bca593ecb81ea2d6f5d726ef64fae"></a><!-- doxytag: member="xspress3.c::xsp3_get_num_cards" ref="ga083bca593ecb81ea2d6f5d726ef64fae" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_num_cards </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of xspress3 cards currently configured in the system. </p>
<p>The correct value is stored in the top level path of the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of cards currently configured in the xspress3 system or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8d0027b9ea7ab15bfe691face4bd45c5"></a><!-- doxytag: member="xspress3.c::xsp3_get_num_chan" ref="ga8d0027b9ea7ab15bfe691face4bd45c5" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_num_chan </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of channels currently configured in the system. </p>
<p>This value is passed into the <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config</a> routine. The correct value is stored in the top level path of the system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of configured channels in the xspress3 system or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga506fab5c0da51744c83b2d1dbca2cacc"></a><!-- doxytag: member="xspress3.c::xsp3_get_revision" ref="ga506fab5c0da51744c83b2d1dbca2cacc" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_revision </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get firmware revision. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the revision a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga932025bce0a866e59399f6d0a460ef73"></a><!-- doxytag: member="xspress3_dma.c::xsp3_get_run_flags" ref="ga932025bce0a866e59399f6d0a460ef73" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_run_flags </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the run mode flags. </p>
<p>Retrieve run mode flags as set by <a class="el" href="">xsp3_set_run_flags</a>. <br/>
<br/>
 The following definitions describe the valid values for the stream  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_RUN_FLAGS</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the value of run flags </dd></dl>

</div>
</div>
<a class="anchor" id="ga495d0a4b981ad713d9284c75e08730f6"></a><!-- doxytag: member="xspress3.c::xsp3_get_window" ref="ga495d0a4b981ad713d9284c75e08730f6" args="(int path, int chan, int win, u_int32_t *low, u_int32_t *high)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_get_window </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>high</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the scaler window settings. </p>
<p>Retrieve the in-window scalers limits as set by <a class="el" href="">xsp3_set_window</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>win</em>&nbsp;</td><td>the window (0 or 1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>low</em>&nbsp;</td><td>returned low window thresholds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>high</em>&nbsp;</td><td>returned high window threshold </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gabfe70c27b15eccfee99e8891c4d241e8"></a><!-- doxytag: member="xspress3_dtc.c::xsp3_getDeadtimeCalculationEnergy" ref="gabfe70c27b15eccfee99e8891c4d241e8" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double xsp3_getDeadtimeCalculationEnergy </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the energy for dead time correction. </p>
<p>The user code should tell the library at approximately what energy the system is operating. TODO: May calculate from the MCA. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the energy or negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga36d0b281b850c64fb702ef8ca27b488b"></a><!-- doxytag: member="xspress3_hardware_conf.c::xsp3_has_glitch_det" ref="ga36d0b281b850c64fb702ef8ca27b488b" args="(int path, int card, int *min_thres)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_has_glitch_det </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>min_thres</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine whether firmware includes a glitch detector. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>feaures</em>&nbsp;</td><td>Pointer to <a class="el" href="">Xspress3_features</a> to return a copy of the feature structure into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Glitch detector code as defined by <a class="el" href="group___x_s_p___f_e_a_t_u_r_e___g_d_e_t.html">XSP_FEATURE_GDET</a> or &lt;0 =&gt; ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="ga1be2e3752414db3354a335f69febe1e4"></a><!-- doxytag: member="xspress3_hardware_conf.c::xsp3_has_itfg" ref="ga1be2e3752414db3354a335f69febe1e4" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_has_itfg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine whether firmware includes an internal TFG. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Internal TFG code as defined by <a class="el" href="">XSP3_FEATURS_TIMING_GEN</a> or &lt;0 =&gt; ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="ga673ae2d9f80b5e5fe73f94cdc9e98a0e"></a><!-- doxytag: member="xspress3_hardware_conf.c::xsp3_has_reset_det" ref="ga673ae2d9f80b5e5fe73f94cdc9e98a0e" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_has_reset_det </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine whether firmware includes a Reset detector. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Internal TFG code as defined by <a class="el" href="">XSP3_FEATURS_TIMING_GEN</a> or &lt;0 =&gt; ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="gab7b8bb43907d58f18a61dbd985542c18"></a><!-- doxytag: member="xspress3_hardware_conf.c::xsp3_has_scope_dig_alt0" ref="gab7b8bb43907d58f18a61dbd985542c18" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_has_scope_dig_alt0 </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determine whether firmware Alternatebit 3..0 controlling scope stream 0. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Internal TFG code as defined by <a class="el" href="">XSP3_FEATURS_TIMING_GEN</a> or &lt;0 =&gt; ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="gaed10703918be9fd1491bb583e361b27a"></a><!-- doxytag: member="xspress3_dtc.c::xsp3_hist_dtc_read4d" ref="gaed10703918be9fd1491bb583e361b27a" args="(int path, double *hist_buff, double *scal_buff, unsigned eng, unsigned aux, unsigned chan, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_chan, unsigned num_tf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_hist_dtc_read4d </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>hist_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>scal_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_tf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a 4 dimensional block of dead time corrected histogram data and optionally return the dead time corrected scaler data. </p>
<p>This is the usual method to access dead time corrected data. Both MCA and scaler data can be returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hist_buff</em>&nbsp;</td><td>buffer pointer to receive the histogram data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scal_buff</em>&nbsp;</td><td>buffer pointer to receive the scaler data or NULL if not required. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>eng</em>&nbsp;</td><td>is the start energy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux</em>&nbsp;</td><td>is the starting aux point (should be 0) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tf</em>&nbsp;</td><td>is the starting time frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_eng</em>&nbsp;</td><td>number of energies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_aux</em>&nbsp;</td><td>number of aux data (should be 1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_chan</em>&nbsp;</td><td>number of channels </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>number of time frames </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gade395791d70335b40677571a82584919"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_arm" ref="gade395791d70335b40677571a82584919" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_arm </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start system ready for histogramming but do not software enable histogramming. </p>
<p>For non-farm mode UDP core versions the UDP port and frame numbers are reset as the scope mode also uses the UDP connection on a different port. In software timing mode, counting is left disabled, start with <a class="el" href="group__toplevel.html#gaeed745920deb1aaca2ec8dbf2919136e">xsp3_histogram_continue()</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. card == -1 causes all cards in a multi card system to start. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf818e75dbb4e6a52192705c70dfac1fd"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_clear" ref="gaf818e75dbb4e6a52192705c70dfac1fd" args="(int path, int first_chan, int num_chan, int first_frame, int num_frames)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_clear </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>first_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_frames</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clears a section of the histogramming data buffer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_chan</em>&nbsp;</td><td>first channel to start clearing from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_chan</em>&nbsp;</td><td>number of channels to clear. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_frame</em>&nbsp;</td><td>first frame number to start clearing from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_frames</em>&nbsp;</td><td>number of frames to clear. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gaeed745920deb1aaca2ec8dbf2919136e"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_continue" ref="gaeed745920deb1aaca2ec8dbf2919136e" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_continue </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Continue counting from armed or paused when time framing is in software controlled (FIXED) mode. </p>
<p>The System must have started first with <a class="el" href="group__toplevel.html#gaf3b1a4949881a95c76bad27b1b3f5783">xsp3_histogram_start()</a> or <a class="el" href="group__toplevel.html#gade395791d70335b40677571a82584919">xsp3_histogram_arm()</a> </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card is less than 0 then all cards are selected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gac86da3c2d625a6a872847d2b6edca84a"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_is_any_busy" ref="gac86da3c2d625a6a872847d2b6edca84a" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_is_any_busy </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check if any histogarmming thread for this system is busy or waiting for data. </p>
<p>Usually the histogramming thread will keep up with the list of events and will idle in a blocking read. If the system is used at high rate and CPU load or page faults stall the histogram thread may take some time to finish processing data from the network stack byffers. To safely stop the system, the supply of histogram data should be stopped either by the external timing generator negating the count enable input or by calling <a class="el" href="group__toplevel.html#ga6611bffd6c764d6dc971ac0f3c13cf75">xsp3_histogram_stop()</a> to negate the Run bit in the timing control register. After this the calling program should repeat sleeping 10 ms and checking this busy flag until it is seen to be not busy twice on the run.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if busy 0 idle or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gace2c23d40d2690671901f4c683a58c3c"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_pause" ref="gace2c23d40d2690671901f4c683a58c3c" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_pause </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pause counting in seriesof software timed frames. </p>
<p>The next <a class="el" href="">xsp3_histogram_continue</a> will increment time frame andcontinue counting. This leaves DMAs running ready for next frame. The System must have started first with <a class="el" href="group__toplevel.html#gaf3b1a4949881a95c76bad27b1b3f5783">xsp3_histogram_start()</a></p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card is less than 0 then all cards are selected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga75a51e96d7ad2e2f3d4be4b787f66d9d"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_read3d" ref="ga75a51e96d7ad2e2f3d4be4b787f66d9d" args="(int path, u_int32_t *buffer, unsigned x, unsigned y, unsigned t, unsigned dx, unsigned dy, unsigned dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_read3d </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a 3 dimensional block of histogram data with aux and chan combined into "y" to suit da.server. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>a pointer to the buffer for the returned data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>x</em>&nbsp;</td><td>is the start energy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>y</em>&nbsp;</td><td>is the channel and aux combined, converting aux and then channel </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>is the start time frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dx</em>&nbsp;</td><td>is the number of energies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dy</em>&nbsp;</td><td>is the number of the combined channel &amp; aux </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>is the number of time frames </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga48dac2327cda3dd127ff6f36d177a403"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_read4d" ref="ga48dac2327cda3dd127ff6f36d177a403" args="(int path, u_int32_t *buffer, unsigned eng, unsigned aux, unsigned chan, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_chan, unsigned num_tf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_read4d </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_tf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a 4 dimensional block of histogram data. </p>
<div class="fragment"><pre class="fragment">
 * Data set is 4 dimensional. Read any 4d cuboid from this 4d data volume
 * Dimension 1: Energy typically 0..4095 unless RoI are used to reduce volume
 * Dimension 2: Any auxilary data, srta 0, num1 for normal operation, can be position on ADC ramp
 * Dimension 3: Channel number
 * Dimension 4: Time frame
 *
 *					&lt;------- Dim1 ------ Energy --------------------&gt;
 * 0	1	2	3	....		4093	4094	4095
 * T=0	Chan 0 Aux 0	0	1	2	3	....		4093	4094	4095
 * 		Chan 0 Aux 1	4096			....						8191
 * 		Chan 0 Aux 2	8192			....						12287
 * 		Chan 0 Aux ...	12288			...							16383
 *
 * T=0	Chan 1 Aux 0	nbins_aux1*nbin_aux2+0		....	nbins_aux1*nbin_aux2+4095
 * 		Chan 1 Aux 1	nbins_aux1*nbin_aux2+4096	....	nbins_aux1*nbin_aux2+8191
 * 		Chan 1 Aux 2
 * 		Chan 1 Aux ...
 *
 * T=0	Chan 2 Aux 0	2*nbins_aux1*nbin_aux2+0	....	2*nbins_aux1*nbin_aux2+4095
 * 		Chan 2 Aux 1	2*nbins_aux1*nbin_aux2+4096	....	2*nbins_aux1*nbin_aux2+8191
 * 		Chan 2 Aux 2
 * 		Chan 2 Aux ...
 *
 * 	.....
 * T=1	Chan 0 Aux 0	1*num_chan*nbins_aux1*nbin_aux2+0	....	1*num_chan*nbins_aux1*nbin_aux2+4095
 * 		Chan 0 Aux 1
 * 		Chan 0 Aux 2
 * 		Chan 0 Aux ...
 * </pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>buffer pointer to receive the histogram data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>eng</em>&nbsp;</td><td>is the start energy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux</em>&nbsp;</td><td>is the starting aux point </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tf</em>&nbsp;</td><td>is the starting time frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_eng</em>&nbsp;</td><td>number of energies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_aux</em>&nbsp;</td><td>number of aux data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_chan</em>&nbsp;</td><td>number of channels </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>number of time frames </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga88697faf20c618ef49135fc935e4b016"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_read_chan" ref="ga88697faf20c618ef49135fc935e4b016" args="(int path, u_int32_t *buffer, unsigned chan, unsigned eng, unsigned aux, unsigned tf, unsigned num_eng, unsigned num_aux, unsigned num_tf)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_read_chan </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_eng</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_aux</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_tf</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a channel of histogram data. </p>
<div class="fragment"><pre class="fragment">
 * The raw data arrangement is stored in a /dev/shm shared data area per channel.
 * Each channel's data region is a 3 d volume: energy, aux and time.
 * The module header and imgd display program only understand this as  2d : energy , aux and time combined
 *
 * This interface supports the native format of the data from xspress3.
 * Data set is 3 dimensional. Read any 3d cuboid from this 3d data volume
 * Dimension 1: Energy typically 0..4095 unless RoI are used to reduce volume
 * Dimension 2: Any auxiliary data, start=0, num=1 for normal operation, can be position on ADC ramp
 * Dimension 3: Time frame
 *
 * 					&lt;--------- Dim1 -------- Energy --------------------&gt;
 * 						0	1	2	3	....		4093	4094	4095
 * T=0	Aux 0			0	1	2	3	....		4093	4094	4095
 *		Aux 1			4096			....						8191
 *		Aux 2			8192			....						12287
 *		Aux ...			12288			...							16383
 *
 * T=1	Aux 0		nbins_aux1*nbin_aux2+0		....	nbins_aux1*nbin_aux2+4095
 *		Aux 1		nbins_aux1*nbin_aux2+4096	....	nbins_aux1*nbin_aux2+8191
 *		Aux 2
 *
 * T=2	Aux 0		2*nbins_aux1*nbin_aux2+0	....	2*nbins_aux1*nbin_aux2+4095
 *		Aux 1		2*nbins_aux1*nbin_aux2+4096	....	2*nbins_aux1*nbin_aux2+8191
 *		Aux 2
 *		Aux ...
 * </pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>a pointer to the buffer for the returned data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>eng</em>&nbsp;</td><td>is the start energy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>aux</em>&nbsp;</td><td>is the starting aux point </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tf</em>&nbsp;</td><td>is the starting time frame </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_eng</em>&nbsp;</td><td>number of energies </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_aux</em>&nbsp;</td><td>number of aux data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>number of time frames </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf3b1a4949881a95c76bad27b1b3f5783"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_start" ref="gaf3b1a4949881a95c76bad27b1b3f5783" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_start </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start system and enable counting. </p>
<p>Start histogramming after resetting the UDP port and frame numbers. The UDP port reset is only required when it is not in farm mode as the scope mode also uses the UDP connection on a different port. In software timing mode, start counting immediately. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. card == -1 causes all cards in a multi card system to start. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6611bffd6c764d6dc971ac0f3c13cf75"></a><!-- doxytag: member="xspress3_histogram.c::xsp3_histogram_stop" ref="ga6611bffd6c764d6dc971ac0f3c13cf75" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_histogram_stop </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop histogramming. </p>
<p>Clears the run bit and count enable bit in the global timing register. The system will need to be fully restarted using <a class="el" href="">xsp3_histogram_start</a> etc. after stopping like this.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0ba0e14d4063ad966a4385750697da14"></a><!-- doxytag: member="xspress3_i2c.c::xsp3_i2c_read_adc_temp" ref="ga0ba0e14d4063ad966a4385750697da14" args="(int path, int card, float *temp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_i2c_read_adc_temp </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&nbsp;</td>
          <td class="paramname"> <em>temp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read Temperature from all 4 LM75s on 1 or all ADC boards. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>temp</em>&nbsp;</td><td>Pointer to array to store data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga757ccf26dff09b316e07af665388734c"></a><!-- doxytag: member="xspress3_i2c.c::xsp3_i2c_set_adc_temp_limit" ref="ga757ccf26dff09b316e07af665388734c" args="(int path, int card, int critTemp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_i2c_set_adc_temp_limit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>critTemp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set over Temperature threshold for all 4 LM75s on 1 or all ADC boards. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>critTemp</em>&nbsp;</td><td>temperature in degrees to turn off power. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga1553a3974c568daa3a863ecf97353cd3"></a><!-- doxytag: member="xspress3.c::xsp3_init_roi" ref="ga1553a3974c568daa3a863ecf97353cd3" args="(int path, int chan)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_init_roi </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialise the regions of interest. </p>
<p>Removes any existing regions of interest.</p>
<p>This needs to be done if the RoI has been set and the user wishes to switch back to seeing the full spectra. It would be combined with a call to <a class="el" href="">xsp3_format_run</a> with nbits_eng=12.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gad7cf4112aeaf0bf80fbc9dd49956edef"></a><!-- doxytag: member="xspress3_itfg.c::xsp3_itfg_get_setup" ref="gad7cf4112aeaf0bf80fbc9dd49956edef" args="(int path, int card, int *num_tf, u_int32_t *col_time, int *trig_mode, int *gap_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_itfg_get_setup </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>num_tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>col_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>trig_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>gap_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve settings of the Internal time frame generator (TFG). </p>
<p>The minimal internal TFG (currently the only version designed) can create a series of time frames all of the same length. This functions allows the settings as last set by <a class="el" href="group__toplevel.html#ga45a3b1bdca5df51717f98d00fdd200d3">xsp3_itfg_setup()</a> to be read back.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card of the system containing the ITFG </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>Pointer to return the number of time frames. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>col_time</em>&nbsp;</td><td>Pointer to return the collection time per frame in 80 MHz clock cycles. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trig_mode</em>&nbsp;</td><td>Pointer to return the trigger modes defined by <a class="el" href="group___x_s_p3___i_t_f_g___t_r_i_g___m_o_d_e.html">XSP3_ITFG_TRIG_MODE</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gap_mode</em>&nbsp;</td><td>Pointer to return frame to Frame gap moed defined by <a class="el" href="group___x_s_p3___i_t_f_g___g_a_p___m_o_d_e.html">XSP3_ITFG_GAP_MODE</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga45a3b1bdca5df51717f98d00fdd200d3"></a><!-- doxytag: member="xspress3_itfg.c::xsp3_itfg_setup" ref="ga45a3b1bdca5df51717f98d00fdd200d3" args="(int path, int card, int num_tf, u_int32_t col_time, int trig_mode, int gap_mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_itfg_setup </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_tf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&nbsp;</td>
          <td class="paramname"> <em>col_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>trig_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>gap_mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup Internal time frame generator (TFG) for a series of equal length frames. </p>
<p>The minimal internal TFG (currently the only version designed) can create a series of time frames all of the same length. To use the ITFG, set timing source using <a class="el" href="group__toplevel.html#ga770b2fa940753aafa9ed6891d2e90f25">xsp3_set_glob_timeA()</a> with <a class="el" href="">XSP3_GTIMA_SRC_INTERNAL</a>. The ITFG can run a burst of frames immediate from start or can wait for the trigger to start each frame. This trigger can from software or hardware. <br/>
 From software start the system calling <a class="el" href="group__toplevel.html#gade395791d70335b40677571a82584919">xsp3_histogram_arm()</a> then trigger by calling <a class="el" href="group__toplevel.html#gaeed745920deb1aaca2ec8dbf2919136e">xsp3_histogram_continue()</a> then <a class="el" href="group__toplevel.html#gace2c23d40d2690671901f4c683a58c3c">xsp3_histogram_pause()</a>. Note it is necessary to pulse the Count enb signal high and low calling both functions, but the time between the 2 calls does not give the collection time when using the ITFG. <br/>
 For hardware, the system is started using <a class="el" href="group__toplevel.html#gaf3b1a4949881a95c76bad27b1b3f5783">xsp3_histogram_start()</a> and then triggers on the rising edge of TTL_IN(1). This can be switched to the falling edge using XSP3_GLOB_TIMA_VETO_INV in <a class="el" href="group__toplevel.html#ga770b2fa940753aafa9ed6891d2e90f25">xsp3_set_glob_timeA()</a>. The debounce time can also be used to clean the trigger pulse to the internal TFG. <br/>
 In a multi card system, it would be usual to make one card the master and distribute the veto signal (from TTFG_OUT(0..3) to the other cards, so the software does not broadcast settings to all cards. The other cards are set with <a class="el" href="">XSP3_GTIMA_SRC_TTL_VETO_ONLY</a> with the debounce time set to ignore any ringing but the cleanly detect the gaps between frames, see gap_mode and <a class="el" href="group___x_s_p3___i_t_f_g___g_a_p___m_o_d_e.html">XSP3_ITFG_GAP_MODE</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card of the system containing the ITFG. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_tf</em>&nbsp;</td><td>Number of time frames. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>col_time</em>&nbsp;</td><td>Collection time per frame in 80 MHz clock cycles. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trig_mode</em>&nbsp;</td><td>Trigger modes defined by <a class="el" href="group___x_s_p3___i_t_f_g___t_r_i_g___m_o_d_e.html">XSP3_ITFG_TRIG_MODE</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>gap_mode</em>&nbsp;</td><td>Frame to Frame gap moed defined by <a class="el" href="group___x_s_p3___i_t_f_g___g_a_p___m_o_d_e.html">XSP3_ITFG_GAP_MODE</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6a5a675b8e87125f6d3cc23a091b474d"></a><!-- doxytag: member="xspress3_itfg.c::xsp3_itfg_stop" ref="ga6a5a675b8e87125f6d3cc23a091b474d" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_itfg_stop </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the Internal time frame generator (TFG). </p>
<p>This stops the Internal TFG mid experiment. Any end of expermiment procesing is not stopped, so the histogram threads will run to completion.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>Card of the system containing the ITFG. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga287351331773b121b8db78c90bdba4e9"></a><!-- doxytag: member="xspress3_udp.c::xsp3_read_scope_data" ref="ga287351331773b121b8db78c90bdba4e9" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_read_scope_data </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read scope data from 10G ethernet using UDP protocol. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of frames greater than 0 is success else 0 or negative error code is fail. </dd></dl>

</div>
</div>
<a class="anchor" id="ga922527587ac747570235681e0d547e58"></a><!-- doxytag: member="xspress3_save_restore.c::xsp3_restore_settings" ref="ga922527587ac747570235681e0d547e58" args="(int path, char *dir_name, int force_mismatch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_restore_settings </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dir_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>force_mismatch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Restore all xspress3 settings from series of files. </p>
<p>All register, and BRAM settings are restored FIXME: Also Sofware LUTs to be done. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dir_name</em>&nbsp;</td><td>directory with saved settings file. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>force_mismatch</em>&nbsp;</td><td>force restore if major revision of saved file does not match the firmware revision. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5b019fbf3f7db000b8eeb08b4bdf3c63"></a><!-- doxytag: member="xspress3_save_restore.c::xsp3_save_settings" ref="ga5b019fbf3f7db000b8eeb08b4bdf3c63" args="(int path, char *dir_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_save_settings </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dir_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Save all xspress3 settings into a series of files. </p>
<p>The directory specifed must exist. Any existing files will be overwritten.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dir_name</em>&nbsp;</td><td>directory to save settings file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6c0fd494d40067bebf2a8cf6cbf640b1"></a><!-- doxytag: member="xspress3_scaler.c::xsp3_scaler_check_desc" ref="ga6c0fd494d40067bebf2a8cf6cbf640b1" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scaler_check_desc </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function checks the DMA descriptors for the Scaler stream to check how many time frames of scalers have been successfuly transfered to memeory. </p>
<p>Now recommend using <a class="el" href="">xsp3_scaler_check_progress</a> as this checks full system. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of complete time frames or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gac087294ee7be16def702c5e44b901f41"></a><!-- doxytag: member="xspress3_scaler.c::xsp3_scaler_check_progress" ref="gac087294ee7be16def702c5e44b901f41" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scaler_check_progress </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function checks how many time frames have been processed. </p>
<p>For hardware scalers, it check the DMA descriptors for the Scaler stream to check how many time frames of scalers have been successfuly transfered to memeory. For a multi card system it checks all cards and returns the smalleset number of completed frames.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The number of complete time frames or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2035d66b83c87955550dea7e8373e404"></a><!-- doxytag: member="xspress3_dtc.c::xsp3_scaler_dtc_read" ref="ga2035d66b83c87955550dea7e8373e404" args="(int path, double *dest, unsigned scaler, unsigned chan, unsigned t, unsigned n_scalers, unsigned n_chan, unsigned dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scaler_dtc_read </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>scaler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>n_scalers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>n_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a block of dead time corrected scaler data. </p>
<p>If only scalers are required, this the the normal entry point for scalers. However, due to the overhead of reading the scalers from the FPGA board, if both scalers and spectra are required, please use <a class="el" href="">xsp3_hist_dtc_read4d</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>a pointer to the data buffer to receive scaler data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scaler</em>&nbsp;</td><td>is the first scaler number to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the first channel to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>the first time frame to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_scalers</em>&nbsp;</td><td>the number of scaler to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_chan</em>&nbsp;</td><td>number of channels to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>number of time frame to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1010d016188cbc54ebace82c81412480"></a><!-- doxytag: member="xspress3_scaler.c::xsp3_scaler_get_num_tf" ref="ga1010d016188cbc54ebace82c81412480" args="(int path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scaler_get_num_tf </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the maximum number of time frames of scaler data that can be stored with the current memory allocation within the FEM. </p>
<p>The number of time frames may be limited by the scalers or by the MCA memory (see <a class="el" href="">xsp3_get_format</a>). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>number of time frames or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6e31a5956682ff9886ed317965c512a3"></a><!-- doxytag: member="xspress3_scaler.c::xsp3_scaler_read" ref="ga6e31a5956682ff9886ed317965c512a3" args="(int path, u_int32_t *dest, unsigned scaler, unsigned chan, unsigned t, unsigned n_scalers, unsigned n_chan, unsigned dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scaler_read </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>scaler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>n_scalers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>n_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read a block of scaler data. </p>
<p>This is the normal entry point to read scaler data without dead time correction. </p>
<div class="fragment"><pre class="fragment">
 * The data block will comprise of
 * time frame[t]		channel[chan]			scaler[scaler]				data[0]
 *																			...
 * 												scaler[scaler+n_scaler-1]	data[n_scaler-1]
 * 																			...
 * 						channel[chan+n_chan-1]	scaler[scaler]				data[(n_chan-1)*n_scaler]
 * 																			...
 * 												scaler[n_scaler]			data[n_chan*n_scaler-1]
 * 																			...
 * time frame[t+dt-1]	channel[chan]			scaler[scaler]				data[(dt-1)*n_chan*n_scaler]
 *																			...
 * 												scaler[scaler+n_scaler-1]	data[dt*(nchan-1)*n_scaler-1]
 * 																			...
 * 						channel[chan+n_chan-1]	scaler[scaler]				data[(dt*nchan-1)*n_scaler]
 * 																			...
 * 												scaler[scaler+n_scaler-1]	data[dt*n_chan*n_scaler-1]
 *
 * where the scalers are defined as:
 * scaler 0 - Time
 * scaler 1 - ResetTicks
 * scaler 2 - ResetCount
 * scaler 3 - AllEvent
 * scaler 4 - AllGood
 * scaler 5 - InWIn 0
 * scaler 6 - In Win 1
 * scaler 7 - PileUp
 * scaler 8 - Total Time
 * </pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>a pointer to the data buffer to receive scaler data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scaler</em>&nbsp;</td><td>is the first scaler number to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the first channel to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t</em>&nbsp;</td><td>the first time frame to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_scalers</em>&nbsp;</td><td>the number of scaler to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>n_chan</em>&nbsp;</td><td>number of channels to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dt</em>&nbsp;</td><td>number of time frame to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9588da2ad9d33f0917aa16a848bc65d7"></a><!-- doxytag: member="xspress3_dma.c::xsp3_scope_wait" ref="ga9588da2ad9d33f0917aa16a848bc65d7" args="(int path, int card)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_scope_wait </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function polls the DMA descriptors for the two scope DMA streams to check whether all the data has been transfered. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card &lt;0 the function waits until all cards in the system have finished. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga89bc586518b2e250956838081d59d8b2"></a><!-- doxytag: member="xspress3.c::xsp3_set_disable_threading" ref="ga89bc586518b2e250956838081d59d8b2" args="(int path, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_disable_threading </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set Disable multi threading flags. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Replacement disable multi threading flags. See <a class="el" href="group___x_s_p3___m_t___f_l_a_g_s.html">XSP3_MT_FLAGS</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga770b2fa940753aafa9ed6891d2e90f25"></a><!-- doxytag: member="xspress3.c::xsp3_set_glob_timeA" ref="ga770b2fa940753aafa9ed6891d2e90f25" args="(int path, int card, u_int32_t time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_glob_timeA </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup the triggering or time frame control register. </p>
<p>This register should be set to control how the system is to be triggered. Some bits are under user control, others are set/cleared by <a class="el" href="">xsp3_system_start</a>. The timing control can either be from software (<a class="el" href="">XSP3_GTIMA_SRC_SOFTWARE</a>) or from the various hardware inputs. The most common hardware input is to use TTL input 1 to control exposure so the system counts while this input is high. (XSP3_GTIMA_SRC_TTL_VETO_ONLY). The polarity of the selected Veto (and frame0) signals can be inverted using <a class="el" href="">XSP3_GLOB_TIMA_VETO_INV</a> or <a class="el" href="">XSP3_GLOB_TIMA_F0_INV</a> respectively. For hardware testing and potentially to daisy chain cards the TTL inputs can be looped to the TTL output using <a class="el" href="">XSP3_GLOB_TIMA_LOOP_IO</a>. There is a debounce circuit on the Veto and Frame 0 input which digitally ignores pulses (high or low going) below a minimum width specifeid in 80 MHz clock cylces 0..255. This is set using <a class="el" href="xspress3_8h.html#a595892dda074317d5898cfb73e71fb04" title="Set debounce time in 80 MHz cycles to ignore glitches or ringing on Frame0 or Framign signal from any...">XSP3_GLOB_TIMA_DEBOUNCE(time)</a> . This is very useful to help with reflections on long cables with questioanable termination so is recommended.</p>
<p>For demonstration and easy integration into systems with existing scalers, some pulse outputs can be multiplexed onto the TTL outputs. See <a class="el" href="xspress3_8h.html#aaff64a69734c7ce7e8ae48800036b7e6" title="Alternate uses of the TTL Outputs (including channel in windows signals etc).">XSP3_GLOB_TIMA_ALT_TTL()</a>. The following bits should be overwritten by the xsp3_system_start and associated xsp3_histogram_* functions and should not be set by the user code: <a class="el" href="">XSP3_GLOB_TIMA_ENB_SCALER</a>, <a class="el" href="">XSP3_GLOB_TIMA_ENB_HIST</a>, <a class="el" href="xspress3_8h.html#a573f0a7aff3399d2548bd819ab670226">XSP3_GLOB_TIMA_NUM_SCAL_CHAN(x)</a>, <a class="el" href="">XSP3_GLOB_TIMA_RUN</a>, <a class="el" href="">XSP3_GLOB_TIMA_PB_RST</a>, <a class="el" href="">XSP3_GLOB_TIMA_COUNT_ENB</a> <br/>
 The following definitions describe the layout of the global time A register  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_GLOBAL_TIMEA_REGISTER The time frame source bits are defined as:  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_GLOBAL_TIMEA_BITS 0..2 The Alternate TTL output modes are defined as:  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_GLOBAL_TIMEA_ALT_TTL</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card is less than 0 then all cards are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>the time frame register </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6efddbcfd9d2ae04b68c6237f60ff7f4"></a><!-- doxytag: member="xspress3.c::xsp3_set_glob_timeFixed" ref="ga6efddbcfd9d2ae04b68c6237f60ff7f4" args="(int path, int card, u_int32_t time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_glob_timeFixed </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&nbsp;</td>
          <td class="paramname"> <em>time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the fixed time frame register. </p>
<p>Whenever the time frame is reset, at the beginning of a run or using the frame 0 input, thetime frame resets to this value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. If card is less than 0 then all cards are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>time</em>&nbsp;</td><td>the fixed time frame register </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9ed40f17d2ad96d291e60a6b6b47d860"></a><!-- doxytag: member="xspress3.c::xsp3_set_good_thres" ref="ga9ed40f17d2ad96d291e60a6b6b47d860" args="(int path, int chan, u_int32_t good_thres)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_good_thres </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t&nbsp;</td>
          <td class="paramname"> <em>good_thres</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the threshold for the good event scaler. </p>
<p>The system provides 2 versions of all event scaler. The AllGood scaler only counts events above a noise threshold, specified here. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) if chan is less than 0 then all channels are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>good_thres</em>&nbsp;</td><td>the threshold for the good event scaler </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="gabc8cf6682f5430f6ae5461e5a234896f"></a><!-- doxytag: member="xspress3.c::xsp3_set_roi" ref="gabc8cf6682f5430f6ae5461e5a234896f" args="(int path, int chan, int num_roi, XSP3Roi *roi)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_roi </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_roi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct___x_s_p_r_o_i.html">XSP3Roi</a> *&nbsp;</td>
          <td class="paramname"> <em>roi</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the regions of interest. </p>
<p>This sets the region of interest BRAM to output only selected region(s0 of the spectra, placing all other counts into the last bin. It will usually follow a call to <a class="el" href="">xsp3_format_run</a> with nbits_eng&lt;12. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) if chan is less than 0 then all channels are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_roi</em>&nbsp;</td><td>the number of regions of interest. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>roi</em>&nbsp;</td><td>a pointer to an array of <a class="el" href="xspress3_8h.html#afaef0d767f2e05932a1c1e43fbc1e6de">XSP3Roi</a> structures describing the details the region. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>total number of bins used or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga678235d44f81d7cf0bcbc24e2d3a0d5a"></a><!-- doxytag: member="xspress3_dma.c::xsp3_set_run_flags" ref="ga678235d44f81d7cf0bcbc24e2d3a0d5a" args="(int path, int flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_run_flags </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the run mode flags. </p>
<p>The run mode flags control which DMA engines are started by <a class="el" href="">xsp3_system_start</a> usually called from <a class="el" href="">xsp3_histogram_start</a>. The default run flags are XSP3_RUN_FLAGS_SCALERS | XSP3_RUN_FLAGS_HIST which should be enabled unless these features are specifically to be turned off to reduce data in special experiments. Note this is not fully supported. If playback of test data into the system is required, then flags must include XSP3_RUN_FLAGS_PLAYBACK. If saving of scope mode data to DRAM is required, then flags must include XSP3_RUN_FLAGS_SCOPE. Enabling either of theswe not required will still work, but xsp3_system_start will take longer to run.</p>
<p><br/>
<br/>
 The following definitions describe the valid values for the stream  <a class="el" href="xspress3_8h.html">xspress3.h</a> XSP3_RUN_FLAGS</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga370b5f701a5ee1825f83968f4304719f"></a><!-- doxytag: member="xspress3.c::xsp3_set_window" ref="ga370b5f701a5ee1825f83968f4304719f" args="(int path, int chan, int win, int low, int high)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_set_window </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>high</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the scaler windows. </p>
<p>The system provides in firmware or emulates 2 in-window scalers per channel to count typically fluorescence data. The upper and lower limits are specifed in energy bins using this function. They are stored independently on each channel, though this function can copy the same settings tor all channels. Events are counted as in window provided low &lt;= eng &lt;= high </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>chan</em>&nbsp;</td><td>is the number of the channel in the xspress3 system, 0 to (<a class="el" href="group__toplevel.html#ga8d0027b9ea7ab15bfe691face4bd45c5">xsp3_get_num_chan()</a> - 1) if chan is less than 0 then all channels are selected. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>win</em>&nbsp;</td><td>the window scaler (0 or 1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>low</em>&nbsp;</td><td>the low window threshold (0 ... 4095) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>high</em>&nbsp;</td><td>the high window threshold (0 ... 409) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5c57fefce7e9df9c3774c17cb461762c"></a><!-- doxytag: member="xspress3_dtc.c::xsp3_setDeadtimeCalculationEnergy" ref="ga5c57fefce7e9df9c3774c17cb461762c" args="(int path, double energy)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_setDeadtimeCalculationEnergy </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>energy</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the energy for dead time energy correction. </p>
<p>The user code should tell the library at approximately what energy the system is operating. TODO: May calculate from the MCA. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>energy</em>&nbsp;</td><td>the energy in keV </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="xspress3_8h.html#aad318e803581597725f2a5dc06f617e4">XSP3_OK</a> or a negative error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga67a9fcd8b8ebed6997ac2e831b76163b"></a><!-- doxytag: member="xspress3_udp_write.c::xsp3_write_playback_data" ref="ga67a9fcd8b8ebed6997ac2e831b76163b" args="(int path, int card, u_int32_t *buffer, size_t nbytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xsp3_write_playback_data </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>card</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u_int32_t *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>nbytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write playback data into DRAM via the 10G ethernet link. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>a handle to the top level of the xspress3 system returned from <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>card</em>&nbsp;</td><td>is the number of the card in the xspress3 system, 0 for a single card system and up to (<a class="el" href="group__toplevel.html#ga083bca593ecb81ea2d6f5d726ef64fae">xsp3_get_num_cards()</a> - 1) for a multi-card system, where this value has been passed to <a class="el" href="group__toplevel.html#gabbdb522cdcc0230ab9d2e06c63c4cf03">xsp3_config()</a> at xspress3 system configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>buffer containing playback data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbytes</em>&nbsp;</td><td>number of bytes of data in buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>greater or equal to 0 for success else negative error code </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Oct 29 2014 09:17:10 for xspress3api by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
